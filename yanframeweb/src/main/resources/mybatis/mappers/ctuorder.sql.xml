<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="user.mapper.CtuOrderMapper">

    <insert id="insertCtOrder" parameterType="ctOrdersDTO">
        <selectKey resultType="int" order="AFTER" keyProperty="order_id">
            SELECT LAST_INSERT_ID() AS order_id
        </selectKey>

        INSERT INTO ct_orders (
            ct_user_info_id,
            summoney,
            remark,
            create_time,
            create_by,
            deleted
        )
        VALUES
        (
            #{ct_user_info_id},
            #{summoney},
            #{remark},
            SYSDATE(),
            #{create_by},
            1
        )
    </insert>


    <!--插入订单详情-->
    <insert id="insertOrderDetail" parameterType="ctOrderDetailDTO">
        INSERT INTO  `ct_order_detail` (
            `order_id`,
            `sys_goods_info_id`,
            `goods_name`,
            `goods_num`,
            `goods_price`,
            `remark`,
            `create_time`,
            `deleted`
        )
        VALUES
            (
                #{order_id},
                #{sys_goods_info_id},
                #{goods_name},
                #{goods_num},
                #{goods_price},
                #{remark},
                sysdate(),
                1
            )
    </insert>

</mapper>